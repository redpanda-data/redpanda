language: none

branches:
  only:
    - master
    - release/*

git:
   submodules: true

env:
  global:
    - CI: "true"

build:
  pre_ci:
  - docker build -t fedora:redpanda tools/ci
  pre_ci_boot:
    image_name: fedora
    image_tag: redpanda
    pull: false
  ci:
    - |
      python3 tools/build.py --deps=true --targets=all --build=release --log=debug --fmt=false
  advancedReporting: true

integrations:
  notifications:
    - integrationName: email
      type: email
      recipients:
        - v-dev@vectorized.io
      on_cancel: never
      sendFailingSnippet: true
