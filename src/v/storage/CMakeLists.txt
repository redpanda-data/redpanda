v_cc_library(
  NAME storage
  SRCS
    log_segment_reader.cc
    log_manager.cc
    mem_log_impl.cc
    disk_log_impl.cc
    disk_log_appender.cc
    parser.cc
    log_reader.cc
    log_replayer.cc
    probe.cc
    record_batch_builder.cc
    logger.cc
    log_segment_appender.cc
    log_set.cc
    segment.cc
    segment_offset_index.cc
    segment_offset_index_utils.cc
    log_segment_appender_utils.cc
    batch_cache.cc
    index_state.cc
  DEPS
    Seastar::seastar
    v::bytes
    v::config
    v::rphashing
    v::finjector
    v::syschecks
  PUBLIC
)

add_subdirectory(tests)
